<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <title th:text="'Event: ' + ${event.title}">Event Details</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body>
    <div class="container my-5">
        <!-- Event Header -->
        <div class="card shadow mb-4">
            <div class="card-body">
                <div class="row align-items-center">
                    <!-- الصورة -->
                    <div class="col-md-5">
                        <img th:if="${event.imageFileUrl != null}" th:src="${event.imageFileUrl}" alt="Event Image"
                            class="img-fluid rounded"
                            style="max-height: 250px; object-fit: cover; box-shadow: 0 4px 8px rgba(0,0,0,0.1);" />
                    </div>

                    <!-- التفاصيل واللون -->
                    <div class="col-md-7">
                        <h2 class="card-title" th:text="${event.title}">Event Title</h2>

                        <!-- لوحة اللون -->
                        <div style="width: 60px; height: 60px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.3); margin-bottom: 1rem;"
                            th:style="'background-color:' + ${event.color}">
                        </div>

                        <p>
                            <strong>Date:</strong> <span
                                th:text="${#temporals.format(event.startTime, 'dd MMM yyyy HH:mm')}">Event
                                Date</span><br />
                            <strong>Location:</strong> <span th:text="${event.address}">Event Location</span><br />
                            <strong>Description:</strong> <span th:text="${event.description}">Event Description</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reminders Section -->
        <div class="card shadow mb-4">
            <div class="card-header">
                <h4>Reminders</h4>
            </div>
            <div class="card-body">
                <div th:if="${#lists.isEmpty(reminders)}">
                    <p class="text-muted">No reminders set for this event.</p>
                </div>
                <ul class="list-group" th:each="reminder : ${reminders}">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <strong>Time:</strong> <span
                                th:text="${#temporals.format(reminder.reminderTime, 'dd MMM yyyy HH:mm')}">Reminder
                                Time</span><br />
                            <strong>Type:</strong> <span th:text="${reminder.notificationType}">Notification Type</span>
                        </div>
                        <span class="badge" th:classappend="${reminder.sent} ? 'bg-success' : 'bg-secondary'"
                            th:text="${reminder.sent} ? 'Sent' : 'Pending'">Status</span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Add New Reminder Form -->
        <div class="card shadow">
            <div class="card-header">
                <h4>Add New Reminder</h4>
            </div>
            <div class="card-body">
                <form th:action="@{/{id}/reminders/add(id=${event.id})}" th:object="${newReminder}" method="post">
                    <div class="mb-3">
                        <label for="reminderTime" class="form-label">Reminder Time</label>
                        <input type="datetime-local" id="reminderTime" name="reminderTime" class="form-control"
                            required />
                    </div>
                    <div class="mb-3">
                        <label for="notificationType" class="form-label">Notification Type</label>
                        <select id="notificationType" name="notificationType" class="form-select" required>
                            <option value="EMAIL">Email</option>
                            <option value="POPUP">Popup</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Add Reminder</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS (optional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>